
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>ZoOL => Blog</title>
  <meta name="author" content="ZoOL">

  
  <meta name="description" content="在服务器上安装mysql时，报错，安装失败， 内容如下 &gt; sudo gem install mysql &gt; Building native extensions. This could take a while... &gt; ERROR: Error installing &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://zool.me/blog/page/5">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="ZoOL => Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">ZoOL => Blog</a></h1>
  
    <h2>Something for share</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:zool.me" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/categories/rails/">Rails</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/12/17/gem-install-mysql2-error/">Gem Install Mysql2 报错</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-12-17T00:00:00+08:00" pubdate data-updated="true">Dec 17<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>在服务器上安装mysql时，报错，安装失败， 内容如下</p>

<div>
  <pre><code class='bash'>&gt; sudo gem install mysql  
&gt; Building native extensions.  This could take a while...   
&gt; ERROR:  Error installing mysql:  
&gt; ERROR: Failed to build gem native extension.  
&gt; /usr/local/bin/ruby extconf.rb install mysql     
&gt; checking for mysql_query() in -lmysqlclient... no      
&gt; checking for main() in -lm... yes   
&gt; checking for mysql_query() in -lmysqlclient... no   
&gt; checking for main() in -lz... yes   
&gt; checking for mysql_query() in -lmysqlclient... no   
&gt; checking for main() in -lsocket... no   
&gt; checking for mysql_query() in -lmysqlclient... no   
&gt; checking for main() in -lnsl... yes   
&gt; checking for mysql_query() in -lmysqlclient... no   
&gt; extconf.rb failed  
&gt; Could not create Makefile due to some reason, probably lack of   
&gt; necessary libraries and/or headers.  Check the mkmf.log file for more   
&gt; details.  You may need configuration options.   

&gt; Provided configuration options:   
&gt;    --with-opt-dir   
&gt;    --without-opt-dir   
&gt;    --with-opt-include   
&gt;    --without-opt-include=${opt-dir}/include   
&gt;    --with-opt-lib   
&gt;    --without-opt-lib=${opt-dir}/lib   
&gt;    --with-make-prog   
&gt;    --without-make-prog 
&gt;    --srcdir=. 
&gt;    --curdir 
&gt;    --ruby=/usr/local/bin/ruby 
&gt;    --with-mysql-config 
&gt;    --without-mysql-config 
&gt;    --with-mysql-dir 
&gt;    --without-mysql-dir   
&gt;    --with-mysql-include   
&gt;    --without-mysql-include=${mysql-dir}/include   
&gt;    --with-mysql-lib   
&gt;    --without-mysql-lib=${mysql-dir}/lib   
&gt;    --with-mysqlclientlib   
&gt;    --without-mysqlclientlib   
&gt;    --with-mlib   
&gt;    --without-mlib   
&gt;    --with-mysqlclientlib   
&gt;    --without-mysqlclientlib   
&gt;    --with-zlib   
&gt;    --without-zlib   
&gt;    --with-mysqlclientlib   
&gt;    --without-mysqlclientlib   
&gt;    --with-socketlib   
&gt;    --without-socketlib   
&gt;    --with-mysqlclientlib   
&gt;    --without-mysqlclientlib   
&gt;    --with-nsllib   
&gt;    --without-nsllib   
&gt;    --with-mysqlclientlib   
&gt;    --without-mysqlclientlib</code></pre>
</div>


<p>经检查，是由于我将mysql调整了安装目录导致， 执行下面代码后安装成功.</p>

<div>
  <pre><code class='bash'>sudo gem install mysql -- --with-mysql-config=/usr/local/mysql/bin/mysql_config</code></pre>
</div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/12/17/Under-ubuntu-using-apt-get-install-rails-environment/">Ubuntu下用apt-get安装rails环境</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-12-17T00:00:00+08:00" pubdate data-updated="true">Dec 17<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>首先使用apt-get安装ruby</p>

<div>
  <pre><code class='bash'>sudo apt-get install ruby</code></pre>
</div>


<p>运行 ruby -v</p>

<div>
  <pre><code class='bash'>ruby 1.8.7 (2010-06-23 patchlevel 299) [i686-linux]</code></pre>
</div>


<p>ruby安装完毕</p>

<p>安装rubygems，<em>注意,这里不要用apt-get来安装</em></p>

<p>先从官网下载最新版rubygems,并解压</p>

<div>
  <pre><code class='bash'>cd /tmp;wget http://production.cf.rubygems.org/rubygems/rubygems-1.3.7.tgz

    tar zxf rubygems-1.3.7.tgz</code></pre>
</div>


<p>运行安装程序</p>

<div>
  <pre><code class='bash'>sudo ruby setup.rb</code></pre>
</div>


<p>会看到输出很多文字，最后一行是</p>

<div>
  <pre><code class='bash'>RubyGems installed the following executables:

    /usr/bin/gem1.8</code></pre>
</div>


<p>然后做一个ln连接</p>

<div>
  <pre><code class='bash'>sudo ln -s /usr/bin/gem1.8 /usr/bin/gem</code></pre>
</div>


<p>输入gem -v 显示 1.3.7 说明 rubygems安装完毕,开始安装rails</p>

<div>
  <pre><code class='bash'>sudo gem install rails</code></pre>
</div>


<p>经过一段时间的等待和文字输出之后，运行 rails -v， 显示  Rails 3.0.3 说明安装正确</p>

<p>rails new newapp  开始享受rails的快乐吧！</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/12/17/Ubuntu-use-apt-to-install-sqlite-on/">Ubuntu上用apt安装sqlite</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-12-17T00:00:00+08:00" pubdate data-updated="true">Dec 17<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>很简单</p>

<div>
  <pre><code class='bash'>sudo apt-get install sqlite3 libsqlite3-dev</code></pre>
</div>


<p>检查版本</p>

<div>
  <pre><code class='bash'>~ &gt; sqlite3 -version
    3.7.2</code></pre>
</div>


<p>通过命令行进入数据库</p>

<div>
  <pre><code class='bash'>sqlite3 development_newsite.sqlite3

    SQLite version 3.7.2
    Enter &quot;.help&quot; for instructions
    Enter SQL statements terminated with a &quot;;&quot;
    sqlite&gt;</code></pre>
</div>


<p>输入.help查看帮助， .quit退出页面</p>

<p>如果需要图形界面可以安装sqlitebrowser</p>

<div>
  <pre><code class='bash'>sudo apt-get install sqlitebrowser</code></pre>
</div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/12/17/Ubuntu-Based-rvm-ruby-version-management/">Ubuntu下基于rvm管理ruby版本</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-12-17T00:00:00+08:00" pubdate data-updated="true">Dec 17<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>不同的项目需要的ruby版本不同，需要的gems也不同，这时可以使用rvm来帮你。</p>

<p>首先先确保你安装了一些必须组件</p>

<div>
  <pre><code class='bash'>sudo apt-get install curl bison build-essential git-core zlib1g-dev libssl-dev libreadline5-dev libxml2-dev</code></pre>
</div>


<p>然后使用脚本安装</p>

<div>
  <pre><code class='bash'>$ bash &lt; &lt;( curl http://rvm.beginrescueend.com/releases/rvm-install-head )</code></pre>
</div>


<p>上面的bash基本上等同于下面的脚本,两选一即可</p>

<div>
  <pre><code class='bash'>mkdir -p ~/.rvm/src/ &amp;&amp; cd ~/.rvm/src &amp;&amp; rm -rf ./rvm/ &amp;&amp; \
    git clone --depth 1 git://github.com/wayneeseguin/rvm.git &amp;&amp; cd rvm &amp;&amp; ./install</code></pre>
</div>


<p>设置.bashrc, 找到下面的一段代码</p>

<div>
  <pre><code class='bash'>[ -z &quot;$PS1&quot; ] &amp;&amp; return 
    # Some code here... e.g.
    export HISTCONTROL=ignoreboth</code></pre>
</div>


<p>修改为</p>

<div>
  <pre><code class='bash'>if [[ -n &quot;$PS1&quot; ]]; then
    # Some code here... e.g.
    export HISTCONTROL=ignoreboth
    fi
    [[ -s &quot;$HOME/.rvm/scripts/rvm&quot; ]] &amp;&amp; source &quot;$HOME/.rvm/scripts/rvm&quot;</code></pre>
</div>


<p>退出终端，重新进入,测试是否安装成功</p>

<div>
  <pre><code class='bash'>type rvm | head -n1</code></pre>
</div>


<p>看到下面输出说明安装成功</p>

<div>
  <pre><code class='bash'>rvm is a function</code></pre>
</div>


<p>开始安装ree，<em>注意这里不需要suso</em></p>

<div>
  <pre><code class='bash'>rvm install ree</code></pre>
</div>


<p>安装完毕之后，让rvm默认使用ree</p>

<div>
  <pre><code class='bash'>rvm use ree --default</code></pre>
</div>


<p>如果你想使用系统自带的ruby，可以这样切换</p>

<div>
  <pre><code class='bash'>rvm use system</code></pre>
</div>


<p>如果你安装了多个版本的ruby，可以用rvm list 来查看</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/12/17/To-create-an-enhanced-version-of-your-console-irb/">打造你的加强版irb控制台</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-12-17T00:00:00+08:00" pubdate data-updated="true">Dec 17<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="https://github.com/logankoester/irbrc">github地址</a></p>

<h3>安装步骤</h3>

<p>下载</p>

<div>
  <pre><code class='ruby'>git clone git://github.com/logankoester/irbrc.git</code></pre>
</div>


<p>安装相关gems</p>

<div>
  <pre><code class='ruby'>(cd irbrc; rvm gemset import irbrc.gems)</code></pre>
</div>


<p>如果没有装rvm，直接运行</p>

<div>
  <pre><code class='ruby'>sudo gem install awesome_print bond hirb looksee map_by_method net-http-spy sketches what_methods wirble</code></pre>
</div>


<p>做文件连接</p>

<div>
  <pre><code class='ruby'>ln -s ~/irbrc/irbrc ~/.irbrc</code></pre>
</div>


<p>运行irb</p>

<h3>功能介绍</h3>

<ol>
<li><p>输出代码高亮</p></li>
<li><p>irb运行历史记录，下次打开仍保留</p></li>
<li><p>将irb命令行提示缩短为 &lsquo;>>&rsquo;</p></li>
<li><p>输入&#8217;c&#8217;或&#8217;clear&#8217;清屏</p></li>
<li><p>可以通过tab实现代码补全</p></li>
<li><p>使用 <em>fl(file_name)</em> 命令来快速打开文件， <em>rl</em> 命令来重新打开最近文件， <em>rt</em>命令来打开最近文件并重新执行上一条语句</p></li>
<li><p>pm方法，可以很漂亮的列出Object的所有methods</p></li>
<li><p>自动加载rubygems, 并加载下面几个gems</p></li>
<li><p>map_by_method</p></li>
</ol>


<div>
  <pre><code class='ruby'>&gt;a = [&quot;1&quot;, &quot;2&quot;, &quot;3&quot;]

    &gt;a.map_by_to_i

    &gt; =&gt; [1, 2, 3]

   实际上相当于 a.map &amp;:to_i, 但更dsl点不是更好?</code></pre>
</div>


<ul>
<li><p>what_methods</p>

<p>猜方法名专用</p></li>
</ul>


<div>
  <pre><code class='ruby'>&gt;3.14.what? 3  #什么方法返回3？                                             
&gt; 3.14.to_int == 3                                              
&gt; 3.14.floor == 3                                               
&gt; 3.14.round == 3                                               
&gt; 3.14.to_i == 3                                                
&gt; 3.14.prec_i == 3                                              
&gt; 3.14.truncate == 3                                            
&gt; =&gt; [&quot;to_int&quot;, &quot;floor&quot;, &quot;round&quot;, &quot;to_i&quot;, &quot;prec_i&quot;, &quot;truncate&quot;]</code></pre>
</div>


<ul>
<li>pp</li>
</ul>


<p>   用法 ap Object， 把一个Object格式华高亮输出</p>

<ul>
<li>Sketches</li>
</ul>


<p>   可以在irb中使用文字编辑器， 可以参看 <a href="http://ihower.tw/blog/archives/3633">ihower的这篇文章</a></p>

<p>   经实际测试，在使用what_methods时不知什么原因会自动打开sketches，可以编辑~/.irbrc，将135-136的sketeches代码注释掉</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/12/17/Production-environment-rake-db%3A-migrate-error-database-is-not-configured/">生产环境下rake Db:migrate报错database Is Not Configured</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-12-17T00:00:00+08:00" pubdate data-updated="true">Dec 17<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>我在服务器上运行了下面的命令</p>

<div>
  <pre><code class='bash'>RAILS_ENV=production rake db:migrate</code></pre>
</div>


<p>结果报错</p>

<div>
  <pre><code class='bash'>&gt; ** Invoke db:migrate (first_time)

&gt; ** Invoke environment (first_time)

&gt; ** Execute environment

&gt; rake aborted!

&gt; proudction database is not configured</code></pre>
</div>


<p>google后得到解决方法,将RAILS_ENV参数放到最后</p>

<div>
  <pre><code class='bash'>rake db:migrate RAILS_ENV=production</code></pre>
</div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/12/17/Perfect-solution-to-China-time-zone-setting-rails/">完美解决rails中国时区时间设置</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-12-17T00:00:00+08:00" pubdate data-updated="true">Dec 17<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>解释4个时区设置的不同</h2>

<ul>
<li><p>config.active_record.default_timezone</p></li>
<li><p>config.time_zone</p></li>
<li><p>Time.zone</p></li>
<li><p>ENV[&lsquo;TZ&rsquo;]</p></li>
</ul>


<p>分别解释如下:</p>

<ol>
<li><p>ENV[&lsquo;TZ&rsquo;]</p>

<p>这个变量指的是服务器系统变量，ubuntu下可以用cat /etc/timezone来查看</p>

<p>当这个值为 Asia/Shanghai时， 显示就是中国时间。</p>

<p>对于ruby/rails来说，这个值决定 Time.now的显示时间</p></li>
<li><p>config.time_zone</p>

<p>这个值是rails系统对显示时间的默认设置，可以通过 rake time:zones:all 列出所有可以设置的时区</p>

<p>一般来说把这个设置为 &lsquo;Beijing&rsquo;</p></li>
<li><p>Time.zone</p>

<p>这个是设置最终处理显示的时区，可以覆盖config.time_zone,参数和config.time_zone一样</p>

<p>可以参考 railscasts的这篇 <a href="http://railscasts.com/episodes/106-time-zones-in-rails-2-1">Time Zones in Rails 2.1</a></p></li>
<li><p>config.active_record.default_timezone</p>

<p><strong>这里就是全文的关键了！</strong></p>

<p>这个default_timezone是决定active_record对数据库交互的时区设置，也就是影响created_at和updated_at在数据库的记录时间。</p>

<p> 只有两个参数:utc和:local, rails初始化时默认是utc，所以保存到数据库的时间是utc时间。</p></li>
</ol>


<h2>总结</h2>

<p>要在界面和数据库都很好的显示处理中国时区时间，编辑/path/to/site/config/application.rb(rails2是environment.rb), 加入</p>

<div>
  <pre><code class='ruby'>config.active_record.default_timezone = :local
    config.time_zone = &#39;Beijing&#39;</code></pre>
</div>


<p>完美解决rails中国时区时间设置</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/12/17/Code-development-application-to-establish-standardized-processes-gitflow/">应用gitflow建立代码开发标准化流程</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-12-17T00:00:00+08:00" pubdate data-updated="true">Dec 17<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="https://github.com/nvie/gitflow">github地址</a></p>

<p>简单的来说就是几步</p>

<p>1.安装</p>

<div>
  <pre><code class='bash'>wget -q -O - http://github.com/nvie/gitflow/raw/develop/contrib/gitflow-installer.sh | sh</code></pre>
</div>


<pre><code>我在安装的时候从github下载文件时报证书错误，加了参数忽略错误后才成功
</code></pre>

<div>
  <pre><code class='bash'>wget -q -O - --no-check-certificate https://github.com/nvie/gitflow/raw/develop/contrib/gitflow-installer.sh | sudo sh

    sudo apt-get install opt</code></pre>
</div>


<p>2.初始化</p>

<div>
  <pre><code class='bash'>git flow init</code></pre>
</div>


<p>3.开发流程,就像文章里说的</p>

<div>
  <pre><code class='bash'>&gt;开发新特征

&gt;git flow feature start &lt;name&gt; [&lt;base&gt;]
&gt;git flow feature finish &lt;name&gt;
&gt;列出新特征分支
&gt;git flow feature
&gt;准备发布版本

&gt;git flow release start &lt;name&gt; [&lt;base&gt;]
&gt;git flow release finish &lt;name&gt;
&gt;列出发布分支
&gt;git flow release
&gt;&lt; base &gt;是位于develop分支的commit

&gt;修正紧急Bug

&gt;git flow hotfix start &lt;name&gt; [&lt;base&gt;]
&gt;git flow hotfix finish &lt;name&gt;
&gt;列出修正分支
&gt;git flow hotfix
&gt;支援其他成员工作

&gt;git flow support start &lt;name&gt; &lt;base&gt;
&gt;没有finish?(待实践)
&gt;列出支援分支
&gt;git flow support
&gt;&lt; base &gt;是位于master分支的commit</code></pre>
</div>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/12/16/rails-pluralize-words-in-dealing-with-complex-methods/">Rails中处理复数单词的pluralize方法</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-12-16T00:00:00+08:00" pubdate data-updated="true">Dec 16<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>缘由</h1>

<p>在日常开发中，有时候会碰到要将一些单词按照它的数量来按单复数显示</p>

<p>所幸rails已经考虑到了这一点，在ActionView中有一个方法</p>

<div>
  <pre><code class='ruby'>There are &lt;%= pluralize @user.size, &quot;user&quot; %&gt;.</code></pre>
</div>


<p>  例子</p>

<div>
  <pre><code class='ruby'>pluralize(1, &#39;person&#39;)
    # =&gt; 1 person

    pluralize(2, &#39;person&#39;)
    # =&gt; 2 people

    pluralize(3, &#39;person&#39;, &#39;users&#39;)
    # =&gt; 3 users

    pluralize(0, &#39;person&#39;)
    # =&gt; 0 people</code></pre>
</div>


<p>  深入研究pluralize方法:</p>

<div>
  <pre><code class='ruby'>def pluralize(count, singular, plural = nil)
      &quot;#{count || 0} &quot; + ((count == 1 || count =~ /^1(\.0+)?$/) ? singular : (plural || singular.pluralize))
    end</code></pre>
</div>


<p>  可以看到英语单词的单复数是由String#pluralize方法提供，这个是由ActiveSupport::Inflector提供的一个扩展方法</p>

<p>  在rails console里运行</p>

<div>
  <pre><code class='ruby'>&quot;post&quot;.pluralize             # =&gt; &quot;posts&quot;
    &quot;octopus&quot;.pluralize          # =&gt; &quot;octopi&quot;
    &quot;sheep&quot;.pluralize            # =&gt; &quot;sheep&quot;
    &quot;words&quot;.pluralize            # =&gt; &quot;words&quot;
    &quot;CamelOctopus&quot;.pluralize     # =&gt; &quot;CamelOctopi&quot;</code></pre>
</div>


<p>  继续研究ActiveSupport::Inflector.pluralize</p>

<div>
  <pre><code class='ruby'>def pluralize(word)
      result = word.to_s.dup

      if word.empty? || inflections.uncountables.include?(result.downcase)
        result
      else
        inflections.plurals.each { |(rule, replacement)| break if result.gsub!(rule, replacement) }
        result
      end
    end</code></pre>
</div>


<p>可以看到单词的单复数的匹配设置是在inflection.pluarls里，那要如何修改呢？
rails已经有一个配置文件了，在/paht/to/site/config/initializers/inflections.rb</p>

<div>
  <pre><code class='ruby'>ActiveSupport::Inflector.inflections do |inflect|
      inflect.plural /^(ox)$/i, &#39;\1en&#39;
      inflect.singular /^(ox)en/i, &#39;\1&#39;
      inflect.irregular &#39;person&#39;, &#39;people&#39;
      inflect.uncountable %w( fish sheep )
    end</code></pre>
</div>


<p>plural和singual是匹配单复数的通用匹配规则，irregular是处理那些特殊单词变化，uncountbale就是那些单复数一样的单词</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/4/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/10/25/start-new-blog/">Start New Blog</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/06/27/setup-rails-generator-orm/">设置rails中generator使用的orm类型</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/06/23/carriewave-support-for-rails-admin/">增加carrierwave对rails_admin的支持</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/05/26/rails31rc1-execjs-error/">rails3.1rc1在服务器上运行报Could Not Find a JavaScript Runtime错误的解决方法</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/05/26/rails-footnotes/">Rails调试插件rails-footnotes使用说明</a>
      </li>
    
  </ul>
</section>




  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - ZoOL -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
